 Представляю Вашему вниманию «автомобильная сигнализация с функциями удалённого контроля и позиционирования авто». 
 Основные возможности: 
1. Первичные настройки и  контроль за параметрами осуществляются при помощи веб интерфейса, в который можно попасть, используя подключение к Точке Доступа (далее ТД) подключившись к точке доступа MY_AVTO-WIFI, возникающей через 20 сек после подключения питания 12VDC от автомобильного аккумулятора.
2. Основные параметры:
	а) Напряжение аккумулятора, по которому косвенно и сильно не точно можно судить 	о заряде аккумулятора
	б)  Температура в салоне, температура двигателя. 
	в) Координаты GPS авто (необходимо около 10 мин для «холодного старта» при 		    первом запуске устройства)
	г) Состояние датчика вибрации (возможно использование вместо него датчика 		   Холла, герконов, конечных выключателей и т. д., допускается множество 	  		    параллельно соединённых датчиков с NO контактами, с замыканием контактов при 	    срабатывании).
	д) Состояние инфракрасного датчика присутствия  SR505, с задержкой замкнутых 		контактов при срабатывании на  10 сек., для инвертирования сигнала, по требованиям  	правильной 	логики работы устройства, применен обычный маломощный NPN 	транзистор, см. схему. Параллельно допускается использование других датчиков с NO 	контактами, с замыканием контактов при срабатывании).
	е) Состояние двух реле для контроля авто дистанционно. Первое рекомендуется 	применять для аварийной остановки авто, разрывая любые важные для 	функционирования цепи: бензонасос, управление меткой электронного ключа, цепи 	шины CAN и т. д. Контакты второго реле рекомендуется подключить к 	автомобильному клаксону, время работы = 1 мин, с автоматической остановкой. 
	ж) Включатель работы GPS, модема GPRS. 
	з) Изменение пароля ТД 
	и) Изменение периода работы модема, это время паузы между выходами модема на 	     связь. 
	к) Настройка apn sim карты для успешного соединения с сетью Internet. 
Каждое действие в меню обязано завершаться кликом на «Перегрузить устройство с сохранением». 
 Не удалось организовать динамический ввод
 //#define BLYNK_TEMPLATE_ID "jhj"
//#define BLYNK_TEMPLATE_NAME "kgkhjgk"
//#define BLYNK_AUTH_TOKEN "jjh"
так как это противоречит условиям Blynk API.  Кому удастся- прошу дать мне знать об этом. Пользователь обязан вставить свои параметры в код самостоятельно, выбрав в Blynk при создании устрйства: «ESP32» и способ соединения: GSM. 
Логика работы устройства следующая: при подаче питания впервые, начинает через 20 секунд работать ТД. После окончания необходимых настроек, пользователь нажимает «Перегрузить устройство с сохранением». 
После этого включается единственный раз на 2 минуты, - первый запуск после любого Reboot, - ТД с Вашим паролем, сохранённым в контроллере после ввода пользователем. 
 Через 2 мин wifi отключается и запускается модем. 

  Далее вся работа с сигнализацией ведётся через великолепное приложение Blynk, разработанный  украинскими гениями. 
 Мне удалось на бесплатном аккаунте добиться вывода полученных дистанционно координат на карте в браузере, по клику, во всём инете не встречал подобного, одни вопли о 100$ за такую возможность на платном аккаунте.
 После подключения к Blynk и успешного соединения модема с облачным сервисом, в меню Blynk появляются данные. Имеется возможность управления дистанционно. 
 После успешной передачи данных контроллер и вся система уходят в глубокий сон, с энергопотреблением в районе  2 микроампера. Для сравнения, обычная сигнализация без доступа по сети интернет, в стерегущем режиме потребляет около 25mA, на три порядка (!) больше. 
 Время выхода на связь можно задать и из меню Blynk. Рекомендуется 30 — 180 минут. 
В режиме «коннект каждые 30 минут» не удалось выйти за лимит 30000 сообщений бесплатного аккаунта blynk в месяц. Не рекомендуется устанавливать слишком малый интервал из-за высокого энергопотребления модема и неоправданного расхода батареи авто. 
  Привет  тебе, погромист  с  народным платным проектом "GSM автосигнализация" https://www.drive2.ru/c/593248096910065300/ с двумя(!) контроллерами :) и потреблением 150- 200mA постоянно… На мой взгляд, сигнализация, высаживающая заряд автомобильного аккумулятора за неделю  стоянки, — это уже за гранью добра и разума.  
 Не забыты и странные жители тоталитарных стран, с тотальным воровством у ближнего и, как следствие, наличием дополнительной сигнализации в каждом(!) авто. Поэтому предусмотрен аварийный выход из режима сна и выход на связь — при аларме, вызванном срабатыванием любого из сенсоров. При этом каждые 30 сек в течении 2-х минут высылаются  параметры, связанные с охраной авто. Включаются алармы обычной кнопкой при выходе из авто. И я и супруга за ненадобностью такой опции, регулярно забываем о кнопке, да оно и не надо в нормальных странах совершенно… А вот точка на карте, где оставили авто при путешествиях — просто бесценная информация. Вспоминаю, как мы осенью искали час авто без GPS датчика в Праге… :)
 Уведомления о событиях элементарно настраиваются в Blynk, раздел «автоматизация»,  начиная со звукового сигнала в режиме реального времени о событии и заканчивая посылкой сообщения на e-mail. 
 Предложения по усовершенствованию кода, улучшениях в логике работы, благодарностях — приветствуются. 
Disclaymer:  код и схема устройства предоставляются под свободной лицензией и любые претензии к Автору по поводу убытков и неудобств, вызванных попытками изготовления и  использования данного устройства, являются юридически несостоятельными. Автор снимает с себя всякую ответственность за возможные неудобства, материальные убытки и последствия из-за использования продуктов его интеллектуального труда. Ссылка на код, чертежи, промышленное изготовление Устройства возможны  только на условиях  упоминания моего авторства. Искренне Ваш, Олег Филатов. 
                                  
 
Список использованных устройств: 
1. контроллер esp32 Wroom — 1шт. (примерная стоимость 4 Euro
2. DC-DC преобразователь 12VDC- 5VDC, 2A, примерная стоимость 1 Euro
3.  модем SIM800C, выбирайте с питанием 5V только!! И TTL согласованием Rx Tx на плате,  примерная стоимость 3.5 Euro
4. GPS модуль  Neo-6MV2, 3.5 Euro
5. Датчик инфракрасный  SR505, 1 Euro
6. Выключатель алармов, 1 Euro
7. транзистор npn 2N4401, либо любой другой, маломощный NPN транзистор 0.5 Euro
8. 2 транзистора MOSFET IRLB8743, либо другие, надёжно открывающиеся от напряжения выше 2.5VDC (напряжение порта используемого контроллера 3.5VDC) и ток не менее 5A.,
- 2 Euro
9. Резисторы номиналов: 10k — 4шт, 1к -1 шт, 1M — 1 шт, 220К — 1 шт. = 0.5 Euro
10. Реле для Ардуино, 5В — 2 шт, Level HIGH,  2 Euro
11. Датчики DS18B20, Dallas, гильзованные — 2 шт, 2 Euro
12. Геркон с магнитом, 1 шт. — 1E.
Итого: примерно 20 Евро за автосигнализацию с интернет доступом. 
 Для сравнения: средняя сигнализация для авто, с локальным управлением, стоит около 100Euro, с GSM модулем- от 200Euro. Минус удовольствие от творчества… :). 

    1. Лайфхак от меня. Прикупить esim sim карту, самую простую, даже с ограничением на установку только 2-х профилей, например: 5ber, либо 9esim. 
       Находим контору, дающую esim прямо при регистрации, например Betterroaming 
    2. Оплачиваем профиль «Europe Global» за пару евро на год, 1Гб трафика. 
    3. Вставляем в модем, прописываем apn- всё, за символические средства мы видим авто в любой точке Европы целый год. Можно вообще не экономить батарею и настроить систему работать без отключений и сна. Но это уже путь мазохиста- экспериментатора. Алло, мы ищем таланты и отзывы от них! 

Тарифы, к примеру:  esim  от  bnesim на сегодня. Роскошно же. 

Surf 1GB in Europe
1GB
Validity: ∞
No expiry
$2.28
(€2.10)

    Дарю код бесплатно, принимаю благодарности в евро на счёт с реквизитами IBAN:
	 BE95 9741 1406 6858, Oleg Filatov. Bank ID code: PESOBEB1.
